import { firestore, ServiceAccount } from 'firebase-admin'
import { ExtendedDocument } from './interfaces'

export function checkServiceAccount(serviceAccount: ServiceAccount, identifier?: string): void {
  const identifierText = identifier ? `Identifier ${identifier}: ` : ''
  if (!serviceAccount.projectId) throw new Error(identifierText + 'Service Account Parameter "projectId" is missing');
  if (!serviceAccount.clientEmail) throw new Error(identifierText + 'Service Account Parameter "clientEmail" is missing');
  if (!serviceAccount.privateKey) throw new Error(identifierText + 'Service Account Parameter "privateKey" is missing');
}

export function docMapper(doc: firestore.DocumentSnapshot): ExtendedDocument {
  return {
    id: doc.id,
    ...doc.data()
  }
}
