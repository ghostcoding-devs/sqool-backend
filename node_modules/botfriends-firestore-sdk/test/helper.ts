import { checkServiceAccount } from '../src/helper'

test('checkServiceAccount - Service account should be valid', () => {
  checkServiceAccount({
    projectId: 'project-id',
    privateKey: 'private-key',
    clientEmail: 'client-email'
  })
})

test('checkServiceAccount - Service account should be invalid', () => {
  function checkServiceAccountWithoutProjectId() {
    checkServiceAccount({
      projectId: '',
      privateKey: 'private-key',
      clientEmail: 'client-email'
    })
  }
  expect(checkServiceAccountWithoutProjectId).toThrow(/"projectId"/)
})

test('checkServiceAccount - Invalid Serviceaccount should have identifier in errormessage', () => {
  function checkServiceAccountWithIdentifier() {
    checkServiceAccount({
      projectId: '',
      privateKey: 'private-key',
      clientEmail: 'client-email'
    }, 'test')
  }
  expect(checkServiceAccountWithIdentifier).toThrow(/^Identifier test:/)
})


